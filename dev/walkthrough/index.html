<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Walkthrough · bigleaf.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://bgctw.github.io/bigleaf.jl/walkthrough/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">bigleaf.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Walkthrough</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Installation-and-Loading"><span>Installation and Loading</span></a></li><li class="toplevel"><a class="tocitem" href="#Preparing-the-data"><span>Preparing the data</span></a></li><li class="toplevel"><a class="tocitem" href="#General-guidelines-on-package-usage"><span>General guidelines on package usage</span></a></li><li><a class="tocitem" href="#Units"><span>Units</span></a></li><li><a class="tocitem" href="#TODO"><span>TODO</span></a></li><li><a class="tocitem" href="#Meteorological-variables"><span>Meteorological variables</span></a></li><li><a class="tocitem" href="#Unit-interconversions"><span>Unit interconversions</span></a></li></ul></li><li><a class="tocitem" href="../autodocs/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Walkthrough</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Walkthrough</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/bgctw/bigleaf.jl/blob/master/docs/src/walkthrough.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><p>This vignette is a short introduction to the functionalities of the <code>bigleaf.jl</code> package.  It is directed to first-time package users who are familiar with the basic concepts of Julia.  After presenting the use of several key functions of the package,  some useful hints and guidelines are given at the end of the vignette.</p><h1 id="Package-scope-and-important-conceptual-considerations"><a class="docs-heading-anchor" href="#Package-scope-and-important-conceptual-considerations">Package scope and important conceptual considerations</a><a id="Package-scope-and-important-conceptual-considerations-1"></a><a class="docs-heading-anchor-permalink" href="#Package-scope-and-important-conceptual-considerations" title="Permalink"></a></h1><p><code>bigleaf.jl</code> calculates physical and physiological ecosystem properties from eddy covariance data. Examples for such properties are aerodynamic and surface conductance, surface conditions(e.g. temperature, VPD), wind profile, roughness parameters, vegetation-atmosphere decoupling, potential evapotranspiration, (intrinsic) water-use efficiency, stomatal sensitivity to VPD, or intercellular CO2 concentration.  All calculations in the <code>bigleaf.jl</code> package assume that the ecosystem behaves like a  &quot;big-leaf&quot;, i.e. a single, homogenous plane which acts as the only source and sink of the measured fluxes. This assumption comes with the advantages that calculations are simplified considerably and that (in most cases) little ancillary information on the EC sites is required. It is important to keep in mind that these simplifications go hand in hand with critical limitations. All derived variables are bulk ecosystem characteristics and have to be interpreted as such. It is for example not possible to infer within-canopy variations of a certain property.</p><p>Please also keep in mind that the <code>bigleaf.jl</code> package does NOT provide formulations for bottom-up modelling. The principle applied here is to use an inversion approach in which ecosystem properties are inferred top-down from the measured fluxes. Such an inversion can, in principle, be also be conducted with more complex models (e.g. sun/shade or canopy/soil models), but keep in mind that these approaches also require that the additional, site-specific parameters are adequately well known. </p><p>The use of more detailed models is not within the scope of the <code>bigleaf.jl</code> package, but it is preferable to use such approaches when important assumptions of the &quot;big-leaf&quot; approach are not met. This is the case in particular when the ecosystem is sparsely covered with vegetation (low LAI, e.g. sparse crops, some savanna systems). </p><h1 id="Installation-and-Loading"><a class="docs-heading-anchor" href="#Installation-and-Loading">Installation and Loading</a><a id="Installation-and-Loading-1"></a><a class="docs-heading-anchor-permalink" href="#Installation-and-Loading" title="Permalink"></a></h1><p>The <code>bigleaf.jl</code> R package can be installed with the usual command once:</p><pre><code class="language-julia hljs">using Pkg
Pkg.add(bigleaf)</code></pre><p>And then importet to the every Julia session by:</p><pre><code class="language-julia hljs">using bigleaf</code></pre><h1 id="Preparing-the-data"><a class="docs-heading-anchor" href="#Preparing-the-data">Preparing the data</a><a id="Preparing-the-data-1"></a><a class="docs-heading-anchor-permalink" href="#Preparing-the-data" title="Permalink"></a></h1><p>In this tutorial, we will work with a dataset from the eddy covariance site Tharandt (DE-Tha), a spruce forest in Eastern Germany. The DataFrame <code>DE_Tha_Jun_2014</code> is downloaded from the <code>bigleaf</code>  <a href="https://bitbucket.org/juergenknauer/bigleaf/">R package</a> repository and contains half-hourly data of meteorological and flux measurements made in June 2014:</p><pre><code class="language- hljs"># downloading and caching code not shown
tha = DE_Tha_Jun_2014
mdtable(select(describe(tha), :variable, :eltype, :min, :max), latex=false) # hide</code></pre><p>And the first six rows of tha:</p><pre><code class="language- hljs">mdtable(tha[1:6,:],latex=false) # hide</code></pre><p>We give the data.frame a shorter name here. More information on the data (e.g. meaning of column names and units) can be found at the  <a href="https://bitbucket.org/juergenknauer/bigleaf/src/master/man/DE_Tha_Jun_2014.Rd">bigleaf R package</a>.  For more information on the site see e.g. Grünwald &amp; Bernhofer 2007. In addition, we will need some ancillary data for this site throughout this tutorial. To ensure consistency, we define them here at the beginning:</p><pre><code class="language-julia hljs">LAI = 7.6   # leaf area index
zh  = 26.5  # average vegetation height (m)
zr  = 42    # sensor height (m)
Dl  = 0.01  # leaf characteristic dimension (m)</code></pre><h1 id="General-guidelines-on-package-usage"><a class="docs-heading-anchor" href="#General-guidelines-on-package-usage">General guidelines on package usage</a><a id="General-guidelines-on-package-usage-1"></a><a class="docs-heading-anchor-permalink" href="#General-guidelines-on-package-usage" title="Permalink"></a></h1><p>There are a few general guidelines that are important to consider when using the <code>bigleaf.jl</code> package. </p><h2 id="Units"><a class="docs-heading-anchor" href="#Units">Units</a><a id="Units-1"></a><a class="docs-heading-anchor-permalink" href="#Units" title="Permalink"></a></h2><p>It is imperative that variables are provided in the right units, as the plausibility of the input units is not checked in most cases. The required units of the input arguments can be found in the respective help file of the function. The good news is that units do not change across functions. For example, pressure is always required in kPa, and temperature always in °c.</p><h2 id="TODO"><a class="docs-heading-anchor" href="#TODO">TODO</a><a id="TODO-1"></a><a class="docs-heading-anchor-permalink" href="#TODO" title="Permalink"></a></h2><h2 id="Meteorological-variables"><a class="docs-heading-anchor" href="#Meteorological-variables">Meteorological variables</a><a id="Meteorological-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Meteorological-variables" title="Permalink"></a></h2><p>The <code>bigleaf.jl</code> package provides calculation routines for a number of meteorological variables, which are basic to the calculation of many other variables. A few examples on their usage are given below:</p><pre><code class="language-julia hljs"># Saturation vapor pressure (kPa) and slope of the saturation vapor pressure curve (kPa K-1)
Esat_slope(25.0)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(3.1600569164883336, 0.18830553015839052)</code></pre><pre><code class="language-julia hljs"># psychrometric constant (kPa K-1)
psychrometric_constant(25.0,100.0) # Tair, pressure</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.06616110355198965</code></pre><pre><code class="language-julia hljs"># air density (kg m-3)
air_density(25.0,100.0) # Tair, pressure</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1.1684082743664639</code></pre><pre><code class="language-julia hljs"># dew point (degC)
dew_point(25.0,1.0) # Tair, VPD</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">18.764</code></pre><pre><code class="language-julia hljs"># wetbulb temperature (degC)
wetbulb_temp(25.0, 100.0, 1.0) # Tair, pressure, VPD</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">20.648</code></pre><pre><code class="language-julia hljs"># estimate atmospheric pressure from elevation (hypsometric equation)
pressure_from_elevation(500.0, 25.0) # elev, Tair</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">95.68128752221739</code></pre><p>There are several formulations describing the empirical function <code>Esat(Tair)</code>. The following figure compares them at absole scale and as difference to the  default method. The differences are small.</p><p><img src="../Esat_abs.svg" alt/></p><p><img src="../Esat_rel.svg" alt/></p><h2 id="Unit-interconversions"><a class="docs-heading-anchor" href="#Unit-interconversions">Unit interconversions</a><a id="Unit-interconversions-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-interconversions" title="Permalink"></a></h2><p>The package further provides a number of useful unit interconversions, which are straightforward to use (please make sure that the input variable is in the right unit, e_g. rH has to be between 0 and 1 and not in percent):</p><pre><code class="language-julia hljs"># VPD to vapor pressure (e, kPa)
VPD_to_e(2, 25)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1.1600569164883336</code></pre><pre><code class="language-julia hljs"># vapor pressure to specific humidity (kg kg-1)
e_to_q(1, 100)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.006243600811065828</code></pre><pre><code class="language-julia hljs"># relative humidity to VPD (kPa)
rH_to_VPD(0.6, 25)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1.2640227665953336</code></pre><pre><code class="language-julia hljs"># conductance from ms-1 to mol m-2 s-1
ms_to_mol(0.01, 25, 100) # mC, Tair, pressure</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.40339315662384556</code></pre><pre><code class="language-julia hljs"># umol CO2 m-2 s-1 to g C m-2 d-1
umolCO2_to_gC(20)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">20.755008000000004</code></pre><p>Many functions provide constant empirical parameters. Those can be changed by overriding the default values with  <a href="../bigleaf_constants/#bigleaf.bigleaf_constants"><code>bigleaf_constants</code></a>  and passing this Dictionary to the respective function.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../metorological_variables/">- »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.9 on <span class="colophon-date" title="Wednesday 20 October 2021 20:42">Wednesday 20 October 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
